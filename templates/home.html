<!DOCTYPE html>
<html>

<head>
    <title>5G Core Management Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            min-height: 100vh;
            background: #f8fafc;
            color: #334155;
            line-height: 1.6;
        }

        .navbar {
            background: #1e293b;
            padding: 1rem 2rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid #334155;
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .logo i {
            color: #3b82f6;
        }

        .nav-links {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .nav-links a {
            color: #cbd5e1;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .nav-links a:hover {
            background: #334155;
            color: white;
        }

        .logout-btn {
            background: #dc2626;
            border: none;
            padding: 0.5rem 1.5rem;
            color: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
        }

        .logout-btn:hover {
            background: #b91c1c;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        .welcome-section {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border: 1px solid #e2e8f0;
        }

        .welcome-section h1 {
            color: #1e293b;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .welcome-section p {
            color: #64748b;
            font-size: 1rem;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .action-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
            text-align: center;
            position: relative;
        }

        .action-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .action-card.disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .action-card.disabled:hover {
            transform: none;
        }

        .action-icon {
            width: 48px;
            height: 48px;
            background: #3b82f6;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 1.5rem;
        }

        .exp2-card .action-icon { background: #10b981; }
        .exp3-card .action-icon { background: #f59e0b; }
        .exp4-card .action-icon { background: #6366f1; }
        .exp5-card .action-icon { background: #ef4444; }

        .action-card h3 {
            color: #1e293b;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .action-card p {
            color: #64748b;
            font-size: 0.9rem;
            margin-bottom: 1.5rem;
        }

        .booking-badge {
            background: #dbeafe;
            color: #1e40af;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            margin-bottom: 1rem;
            font-size: 0.85rem;
            font-weight: 500;
        }

        .booking-badge i {
            margin-right: 0.5rem;
        }

        .booking-badge.booked-by-other {
            background: #fee2e2;
            color: #991b1b;
        }

        .action-btn {
            background: #3b82f6;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.9rem;
            transition: all 0.2s ease;
            display: inline-block;
            width: 100%;
            cursor: pointer;
        }

        .action-btn:hover:not(:disabled) {
            background: #2563eb;
            transform: translateY(-1px);
        }

        .action-btn:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
            transform: none;
        }

        .exp2-card .action-btn:not(:disabled) { background: #10b981; }
        .exp2-card .action-btn:not(:disabled):hover { background: #059669; }
        .exp3-card .action-btn:not(:disabled) { background: #f59e0b; }
        .exp3-card .action-btn:not(:disabled):hover { background: #d97706; }
        .exp4-card .action-btn:not(:disabled) { background: #6366f1; }
        .exp4-card .action-btn:not(:disabled):hover { background: #4f46e5; }
        .exp5-card .action-btn:not(:disabled) { background: #ef4444; }
        .exp5-card .action-btn:not(:disabled):hover { background: #dc2626; }

        .book-slot-btn {
            background: #6366f1;
            color: white;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            margin-top: 0.75rem;
            text-decoration: none;
            display: inline-block;
        }

        .book-slot-btn:hover {
            background: #4f46e5;
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 1rem;
            }

            .nav-links {
                flex-direction: column;
                gap: 1rem;
            }

            .logo {
                font-size: 1.2rem;
            }

            .welcome-section h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>

<body>
    <nav class="navbar">
        <div class="nav-content">
            <a href="{% url 'accounts:home' %}" class="logo">
                <i class="fas fa-network-wired"></i>
                Private 5G Lab as a Service
            </a>
            <div class="nav-links">
                <a href="{% url 'accounts:home' %}"><i class="fas fa-home"></i> Home</a>
                <a href="{% url 'accounts:booking_dashboard' %}"><i class="fas fa-calendar-alt"></i> Book Session</a>
                <h1 style="color: #cbd5e1; font-size: 1rem;">Welcome, {{ user.username }}</h1>
                <form action="{% url 'logout' %}" method="post" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Logout
                    </button>
                </form>
            </div>
        </div>
    </nav>

    <div class="main-container">
        <div class="welcome-section">
            <h1>Dashboard</h1>
            <p>Manage and access your 5G experiments</p>
             <a href="{% url 'accounts:booking_dashboard' %}"
   style="
       display: inline-flex;
       align-items: center;
       gap: 8px;
       padding: 12px 20px;
       background-color: #007bff;
       color: white;
       border-radius: 6px;
       text-decoration: none;
       font-size: 16px;
       font-weight: 600;
   ">
    <i class="fas fa-calendar-plus" style="font-size:18px;"></i>
    Book Time Slot
</a>

        </div>

        <div class="quick-actions">
            <!-- Exp 1 -->
            <div class="action-card exp1-card {% if not active_bookings_by_key.exp1 and other_bookings.exp1 %}disabled{% endif %}">
                <div class="action-icon">
                    <i class="fas fa-server"></i>
                </div>
                <h3>Exp#1 OAI Core</h3>
                <p>Test and validate your OAI core network functionality</p>

                {% with booking=active_bookings_by_key.exp1 %}
                {% if booking %}
                    <div class="booking-badge">
                        <i class="fas fa-clock"></i> Your Session: {{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}
                    </div>
                    <form method="get" action="{% url 'accounts:start_experiment' booking.id %}">
                        <button type="submit" class="action-btn">Launch Experiment</button>
                    </form>
                {% elif other_bookings.exp1 %}
                    <div class="booking-badge booked-by-other">
                        <i class="fas fa-lock"></i> In Use: {{ other_bookings.exp1.start_time|date:"H:i" }} - {{ other_bookings.exp1.end_time|date:"H:i" }}
                    </div>
                    <button class="action-btn" disabled>Experiment Busy</button>
                {% else %}
                    <button class="action-btn" disabled>No Active Session</button>
                {% endif %}
                {% endwith %}

            
            </div>

            <!-- Exp 2 -->
            <div class="action-card exp2-card {% if not active_bookings_by_key.exp2 and other_bookings.exp2 %}disabled{% endif %}">
                <div class="action-icon">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <h3>Exp#2 OAI+gNB</h3>
                <p>Run gNB tests and analysis with OAI Core</p>

                {% with booking=active_bookings_by_key.exp2 %}
                {% if booking %}
                    <div class="booking-badge">
                        <i class="fas fa-clock"></i> Your Session: {{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}
                    </div>
                    <form method="get" action="{% url 'accounts:start_experiment' booking.id %}">
                        <button type="submit" class="action-btn">Launch Experiment</button>
                    </form>
                {% elif other_bookings.exp2 %}
                    <div class="booking-badge booked-by-other">
                        <i class="fas fa-lock"></i> In Use: {{ other_bookings.exp2.start_time|date:"H:i" }} - {{ other_bookings.exp2.end_time|date:"H:i" }}
                    </div>
                    <button class="action-btn" disabled>Experiment Busy</button>
                {% else %}
                    <button class="action-btn" disabled>No Active Session</button>
                {% endif %}
                {% endwith %}

               
            </div>

            <!-- Exp 3 -->
            <div class="action-card exp3-card {% if not active_bookings_by_key.exp3 and other_bookings.exp3 %}disabled{% endif %}">
                <div class="action-icon">
                    <i class="fas fa-mobile-alt"></i>
                </div>
                <h3>Exp#3 OAI+gNB+UE</h3>
                <p>Simulate User Equipment connections and interactions</p>

                {% with booking=active_bookings_by_key.exp3 %}
                {% if booking %}
                    <div class="booking-badge">
                        <i class="fas fa-clock"></i> Your Session: {{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}
                    </div>
                    <form method="get" action="{% url 'accounts:start_experiment' booking.id %}">
                        <button type="submit" class="action-btn">Launch Experiment</button>
                    </form>
                {% elif other_bookings.exp3 %}
                    <div class="booking-badge booked-by-other">
                        <i class="fas fa-lock"></i> In Use: {{ other_bookings.exp3.start_time|date:"H:i" }} - {{ other_bookings.exp3.end_time|date:"H:i" }}
                    </div>
                    <button class="action-btn" disabled>Experiment Busy</button>
                {% else %}
                    <button class="action-btn" disabled>No Active Session</button>
                {% endif %}
                {% endwith %}

                
            </div>

            <!-- Exp 4 -->
            <div class="action-card exp4-card {% if not active_bookings_by_key.exp4 and other_bookings.exp4 %}disabled{% endif %}">
                <div class="action-icon">
                    <i class="fas fa-project-diagram"></i>
                </div>
                <h3>Exp#4 Open5GS</h3>
                <p>Manage your Open5GS core network deployment</p>

                {% with booking=active_bookings_by_key.exp4 %}
                {% if booking %}
                    <div class="booking-badge">
                        <i class="fas fa-clock"></i> Your Session: {{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}
                    </div>
                    <form method="get" action="{% url 'accounts:start_experiment' booking.id %}">
                        <button type="submit" class="action-btn">Launch Experiment</button>
                    </form>
                {% elif other_bookings.exp4 %}
                    <div class="booking-badge booked-by-other">
                        <i class="fas fa-lock"></i> In Use: {{ other_bookings.exp4.start_time|date:"H:i" }} - {{ other_bookings.exp4.end_time|date:"H:i" }}
                    </div>
                    <button class="action-btn" disabled>Experiment Busy</button>
                {% else %}
                    <button class="action-btn" disabled>No Active Session</button>
                {% endif %}
                {% endwith %}

               
            </div>

            <!-- Exp 5 -->
            <div class="action-card exp5-card {% if not active_bookings_by_key.exp5 and other_bookings.exp5 %}disabled{% endif %}">
                <div class="action-icon">
                    <i class="fas fa-network-wired"></i>
                </div>
                <h3>Exp#5 Free5GC</h3>
                <p>Access your Free5GC core network environment</p>

                {% with booking=active_bookings_by_key.exp5 %}
                {% if booking %}
                    <div class="booking-badge">
                        <i class="fas fa-clock"></i> Your Session: {{ booking.start_time|date:"H:i" }} - {{ booking.end_time|date:"H:i" }}
                    </div>
                    <form method="get" action="{% url 'accounts:start_experiment' booking.id %}">
                        <button type="submit" class="action-btn">Launch Experiment</button>
                    </form>
                {% elif other_bookings.exp5 %}
                    <div class="booking-badge booked-by-other">
                        <i class="fas fa-lock"></i> In Use: {{ other_bookings.exp5.start_time|date:"H:i" }} - {{ other_bookings.exp5.end_time|date:"H:i" }}
                    </div>
                    <button class="action-btn" disabled>Experiment Busy</button>
                {% else %}
                    <button class="action-btn" disabled>No Active Session</button>
                {% endif %}
                {% endwith %}

                
            </div>
        </div>
    </div>
</body>

</html>